!function(t){function n(n){for(var o,r,a=n[0],h=n[1],c=n[2],l=0,f=[];l<a.length;l++)r=a[l],i[r]&&f.push(i[r][0]),i[r]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(t[o]=h[o]);for(u&&u(n);f.length;)f.shift()();return s.push.apply(s,c||[]),e()}function e(){for(var t,n=0;n<s.length;n++){for(var e=s[n],o=!0,a=1;a<e.length;a++){var h=e[a];0!==i[h]&&(o=!1)}o&&(s.splice(n--,1),t=r(r.s=e[0]))}return t}var o={},i={0:0},s=[];function r(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=o,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="C:\\Users\\RCS\\Desktop\\Copies\\HPOExperiment - vanilla\\public\\assets\\js";var a=window.webpackJsonp=window.webpackJsonp||[],h=a.push.bind(a);a.push=n,a=a.slice();for(var c=0;c<a.length;c++)n(a[c]);var u=h;s.push([0,1]),e()}({"+62V":function(t,n){function e(t,n,e){this.from=t,this.to=n,this.gain=1,this.weight=void 0===e?.2*Math.random()-.1:e,this.gater=null,this.elegibility=0,this.previousDeltaWeight=0,this.totalDeltaWeight=0,this.xtrace={nodes:[],values:[]}}t.exports=e,e.prototype={toJSON:function(){return{weight:this.weight}}},e.innovationID=function(t,n){return.5*(t+n)*(t+n+1)+n}},"/Is/":function(t,n,e){"use strict";e.d(n,"a",function(){return l});var o,i,s,r,a,h,c,u=null;function l(t){var n=0;t.setup=function(){window.p=t,t.createCanvas(h,a),o(),i(),u?t.loop():t.noLoop()},t.draw=function(){t.clear(),t.squareGrid(),u&&window.generation<=c?(n===r&&(s(),n=0),window.players.forEach(function(t){t.update(),t.show()}),window.walker.update(),window.walker.show(),n++):u&&window.generation>c?(t.textSize(44),t.textAlign(t.CENTER,t.CENTER),t.fill(255),t.text("Complete",h/2,a/2),t.noLoop()):(t.textSize(44),t.textAlign(t.CENTER,t.CENTER),t.fill(255),t.text("Paused",h/2,a/2))},t.myCustomRedrawAccordingToNewPropsHandler=function(t){t.hasOwnProperty("status")&&(u=t.status),t.hasOwnProperty("initNeat")&&(o=t.initNeat),t.hasOwnProperty("startEvaluation")&&(i=t.startEvaluation),t.hasOwnProperty("endEvaluation")&&(s=t.endEvaluation),t.hasOwnProperty("width")&&(h=t.width),t.hasOwnProperty("height")&&(a=t.height),t.hasOwnProperty("iterations")&&(r=t.iterations),t.hasOwnProperty("width")&&(h=t.width),t.hasOwnProperty("height")&&(a=t.height),t.hasOwnProperty("maxGenerations")&&(c=t.maxGenerations)},t.squareGrid=function(){t.stroke(204,204,204,160),t.strokeWeight(1);for(var n=0;n<=h/20;n++)t.line(20*n+20,0,20*n+20,a);for(var e=0;e<=a/20;e++)t.line(0,20*e+20,h,20*e+20);t.fill(255,255,255,100),t.rect(0,0,h,a),t.noStroke()},t.distance=function(t,n,e,o){var i=t-e,s=n-o;return Math.sqrt(i*i+s*s)},t.activationColor=function(t,n){var e=1-Math.min(t/n,1),o=[255,255,0];return e<.5?o[0]=2*e*255:o[1]=255*(1-2*(e-.5)),o},t.angleToPoint=function(t,n,e,o){var i=this.distance(t,n,e,o),s=(e-t)/i,r=(o-n)/i,a=Math.acos(s);return a=r<0?2*Math.PI-a:a}}},0:function(t,n,e){e("201c"),e("ng4s"),t.exports=e("ldto")},"2X5p":function(t,n){t.exports={SINGLE_POINT:{name:"SINGLE_POINT",config:[.4]},TWO_POINT:{name:"TWO_POINT",config:[.4,.9]},UNIFORM:{name:"UNIFORM"},AVERAGE:{name:"AVERAGE"}}},"6nyA":function(t,n,e){var o={activation:e("Ya6e"),mutation:e("sF2W"),selection:e("v752"),crossover:e("2X5p"),cost:e("pGbi"),gating:e("DMsw"),connection:e("I9gG"),rate:e("siVa")};t.exports=o},"9+vj":function(t,n,e){(function(n){t.exports=s;var o=e("Po9p"),i=e("33yf");function s(t,e){this.worker=o.fork(i.join(n,"/worker")),this.worker.send({set:t,cost:e.name})}s.prototype={evaluate:function(t){var n=this;return new Promise(function(e,o){var i=t.serialize(),s={activations:i[0],states:i[1],conns:i[2]},r=n.worker;n.worker.on("message",function t(n){r.removeListener("message",t),e(n)}),n.worker.send(s)})},terminate:function(){this.worker.kill()}}}).call(this,"/")},DMsw:function(t,n){t.exports={OUTPUT:{name:"OUTPUT"},INPUT:{name:"INPUT"},SELF:{name:"SELF"}}},HvSW:function(t,n){t.exports={warnings:!0}},I9gG:function(t,n){t.exports={ALL_TO_ALL:{name:"OUTPUT"},ALL_TO_ELSE:{name:"INPUT"},ONE_TO_ONE:{name:"SELF"}}},L2Mg:function(t,n,e){t.exports=r;var o=e("6nyA"),i=e("+62V"),s=e("HvSW");e("l++g");function r(t){this.bias=0,this.squash=o.activation.LOGISTIC,this.type=t||"hidden",this.activation=0,this.state=0,this.old=0,this.mask=1,this.previousDeltaBias=0,this.totalDeltaBias=0,this.connections={in:[],out:[],gated:[],self:new i(this,this,0)},this.error={responsibility:0,projected:0,gated:0}}r.prototype={activate:function(t){if(void 0!==t)return this.activation=t,this.activation;var n;for(this.old=this.state,this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias,n=0;n<this.connections.in.length;n++){var e=this.connections.in[n];this.state+=e.from.activation*e.weight*e.gain}this.activation=this.squash(this.state)*this.mask,this.derivative=this.squash(this.state,!0);var o=[],i=[];for(n=0;n<this.connections.gated.length;n++){var s=this.connections.gated[n],r=s.to,a=o.indexOf(r);a>-1?i[a]+=s.weight*s.from.activation:(o.push(r),i.push(s.weight*s.from.activation+(r.connections.self.gater===this?r.old:0))),s.gain=this.activation}for(n=0;n<this.connections.in.length;n++){var h=this.connections.in[n];h.elegibility=this.connections.self.gain*this.connections.self.weight*h.elegibility+h.from.activation*h.gain;for(var c=0;c<o.length;c++){var u=o[c],l=i[c],f=h.xtrace.nodes.indexOf(u);f>-1?h.xtrace.values[f]=u.connections.self.gain*u.connections.self.weight*h.xtrace.values[f]+this.derivative*h.elegibility*l:(h.xtrace.nodes.push(u),h.xtrace.values.push(this.derivative*h.elegibility*l))}}return this.activation},noTraceActivate:function(t){if(void 0!==t)return this.activation=t,this.activation;var n;for(this.state=this.connections.self.gain*this.connections.self.weight*this.state+this.bias,n=0;n<this.connections.in.length;n++){var e=this.connections.in[n];this.state+=e.from.activation*e.weight*e.gain}for(this.activation=this.squash(this.state),n=0;n<this.connections.gated.length;n++)this.connections.gated[n].gain=this.activation;return this.activation},propagate:function(t,n,e,o){n=n||0,t=t||.3;var i=0;if("output"===this.type)this.error.responsibility=this.error.projected=o-this.activation;else{var s;for(s=0;s<this.connections.out.length;s++){var r=this.connections.out[s];i+=r.to.error.responsibility*r.weight*r.gain}for(this.error.projected=this.derivative*i,i=0,s=0;s<this.connections.gated.length;s++){var a=this.connections.gated[s],h=a.to,c=h.connections.self.gater===this?h.old:0;c+=a.weight*a.from.activation,i+=h.error.responsibility*c}this.error.gated=this.derivative*i,this.error.responsibility=this.error.projected+this.error.gated}if("constant"!==this.type){for(s=0;s<this.connections.in.length;s++){for(var u=this.connections.in[s],l=this.error.projected*u.elegibility,f=0;f<u.xtrace.nodes.length;f++){var p=u.xtrace.nodes[f],d=u.xtrace.values[f];l+=p.error.responsibility*d}var v=t*l*this.mask;u.totalDeltaWeight+=v,e&&(u.totalDeltaWeight+=n*u.previousDeltaWeight,u.weight+=u.totalDeltaWeight,u.previousDeltaWeight=u.totalDeltaWeight,u.totalDeltaWeight=0)}var g=t*this.error.responsibility;this.totalDeltaBias+=g,e&&(this.totalDeltaBias+=n*this.previousDeltaBias,this.bias+=this.totalDeltaBias,this.previousDeltaBias=this.totalDeltaBias,this.totalDeltaBias=0)}},connect:function(t,n){var e=[];if(void 0!==t.bias)if(t===this)0!==this.connections.self.weight?s.warnings:this.connections.self.weight=n||1,e.push(this.connections.self);else{var o=new i(this,t,n);t.connections.in.push(o),this.connections.out.push(o),e.push(o)}else for(var r=0;r<t.nodes.length;r++){var a=new i(this,t.nodes[r],n);t.nodes[r].connections.in.push(a),this.connections.out.push(a),t.connections.in.push(a),e.push(a)}return e},disconnect:function(t,n){if(this!==t){for(var e=0;e<this.connections.out.length;e++){var o=this.connections.out[e];if(o.to===t){this.connections.out.splice(e,1);var i=o.to.connections.in.indexOf(o);o.to.connections.in.splice(i,1),null!==o.gater&&o.gater.ungate(o);break}}n&&t.disconnect(this)}else this.connections.self.weight=0},gate:function(t){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var e=t[n];this.connections.gated.push(e),e.gater=this}},ungate:function(t){Array.isArray(t)||(t=[t]);for(var n=t.length-1;n>=0;n--){var e=t[n],o=this.connections.gated.indexOf(e);this.connections.gated.splice(o,1),e.gater=null,e.gain=1}},clear:function(){for(var t=0;t<this.connections.in.length;t++){var n=this.connections.in[t];n.elegibility=0,n.xtrace={nodes:[],values:[]}}for(t=0;t<this.connections.gated.length;t++){this.connections.gated[t].gain=0}this.error.responsibility=this.error.projected=this.error.gated=0,this.old=this.state=this.activation=0},mutate:function(t){if(void 0===t)throw new Error("No mutate method given!");if(!(t.name in o.mutation))throw new Error("This method does not exist!");switch(t){case o.mutation.MOD_ACTIVATION:var n=t.allowed[(t.allowed.indexOf(this.squash)+Math.floor(Math.random()*(t.allowed.length-1))+1)%t.allowed.length];this.squash=n;break;case o.mutation.MOD_BIAS:var e=Math.random()*(t.max-t.min)+t.min;this.bias+=e}},isProjectingTo:function(t){if(t===this&&0!==this.connections.self.weight)return!0;for(var n=0;n<this.connections.out.length;n++){if(this.connections.out[n].to===t)return!0}return!1},isProjectedBy:function(t){if(t===this&&0!==this.connections.self.weight)return!0;for(var n=0;n<this.connections.in.length;n++){if(this.connections.in[n].from===t)return!0}return!1},toJSON:function(){return{bias:this.bias,type:this.type,squash:this.squash.name,mask:this.mask}}},r.fromJSON=function(t){var n=new r;return n.bias=t.bias,n.type=t.type,n.mask=t.mask,n.squash=o.activation[t.squash],n}},M76f:function(t,n,e){t.exports=i;var o=e("tW6Z");function i(t,n){var e=new Blob([this._createBlobString(n)]);this.url=window.URL.createObjectURL(e),this.worker=new Worker(this.url);var o={set:new Float64Array(t).buffer};this.worker.postMessage(o,[o.set])}i.prototype={evaluate:function(t){var n=this;return new Promise(function(e,o){var i=t.serialize(),s={activations:new Float64Array(i[0]).buffer,states:new Float64Array(i[1]).buffer,conns:new Float64Array(i[2]).buffer};n.worker.onmessage=function(t){var n=new Float64Array(t.data.buffer)[0];e(n)},n.worker.postMessage(s,[s.activations,s.states,s.conns])})},terminate:function(){this.worker.terminate(),window.URL.revokeObjectURL(this.url)},_createBlobString:function(t){return"\n      var F = [".concat(o.activations.toString(),"];\n      var cost = ").concat(t.toString(),";\n      var multi = {\n        deserializeDataSet: ").concat(o.deserializeDataSet.toString(),",\n        testSerializedSet: ").concat(o.testSerializedSet.toString(),",\n        activateSerializedNetwork: ").concat(o.activateSerializedNetwork.toString(),"\n      };\n\n      this.onmessage = function (e) {\n        if(typeof e.data.set === 'undefined'){\n          var A = new Float64Array(e.data.activations);\n          var S = new Float64Array(e.data.states);\n          var data = new Float64Array(e.data.conns);\n\n          var error = multi.testSerializedSet(set, cost, A, S, data, F);\n\n          var answer = { buffer: new Float64Array([error ]).buffer };\n          postMessage(answer, [answer.buffer]);\n        } else {\n          set = multi.deserializeDataSet(new Float64Array(e.data.set));\n        }\n      };")}}},SP5B:function(t,n,e){"use strict";function o(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function(){function t(n,e,o,i,s){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=o,this.vx=0,this.vy=0,this.r=6,this.WIDTH=i,this.HEIGHT=s,this.MAX_SPEED=5,this.SCORE_RADIUS=100,this.brain=n,this.brain.score=0}var n,e,i;return n=t,(e=[{key:"update",value:function(){var t=this.detect(),n=2*this.brain.activate(t)[0]*window.p.PI;this.ax=Math.cos(n),this.ay=Math.sin(n),this.vx+=this.ax,this.vy+=this.ay,this.vx=this.vx>this.MAX_SPEED?this.MAX_SPEED:this.vx<-this.MAX_SPEED?-this.MAX_SPEED:this.vx,this.vy=this.vy>this.MAX_SPEED?this.MAX_SPEED:this.vy<-this.MAX_SPEED?-this.MAX_SPEED:this.vy,this.x+=this.vx,this.y+=this.vy,this.x=this.x>=this.WIDTH?this.WIDTH:this.x<=0?0:this.x,this.y=this.y>=this.HEIGHT?this.HEIGHT:this.y<=0?0:this.y,0!==this.x&&this.x!==this.WIDTH||(this.vx=-this.vx),0!==this.y&&this.y!==this.HEIGHT||(this.vy=-this.vy),this.score()}},{key:"updateMod",value:function(t,n,e,o){var i=this.detectMod(t,n,e,o),s=2*this.brain.activate(i)[0]*window.p.PI;this.ax=Math.cos(s),this.ay=Math.sin(s),this.vx+=this.ax,this.vy+=this.ay,this.vx=this.vx>this.MAX_SPEED?this.MAX_SPEED:this.vx<-this.MAX_SPEED?-this.MAX_SPEED:this.vx,this.vy=this.vy>this.MAX_SPEED?this.MAX_SPEED:this.vy<-this.MAX_SPEED?-this.MAX_SPEED:this.vy,this.x+=this.vx,this.y+=this.vy,this.x=this.x>=this.WIDTH?this.WIDTH:this.x<=0?0:this.x,this.y=this.y>=this.HEIGHT?this.HEIGHT:this.y<=0?0:this.y,0!==this.x&&this.x!==this.WIDTH||(this.vx=-this.vx),0!==this.y&&this.y!==this.HEIGHT||(this.vy=-this.vy),this.scoreMod(t,n,e,o)}},{key:"score",value:function(){var t=window.p.distance(this.x,this.y,window.walker.x,window.walker.y);!isNaN(t)&&t<this.SCORE_RADIUS&&(this.brain.score+=this.SCORE_RADIUS-t),window.highestScore=this.brain.score>window.highestScore?this.brain.score:window.highestScore}},{key:"scoreMod",value:function(t,n,e,o){var i=window.p.distance(this.x,this.y,t,n);!isNaN(i)&&i<this.SCORE_RADIUS&&(this.brain.score+=this.SCORE_RADIUS-i)}},{key:"show",value:function(){var t=window.p.angleToPoint(this.x,this.y,this.x+this.vx,this.y+this.vy)+window.p.HALF_PI,n=window.p.activationColor(this.brain.score,window.highestScore);window.p.push(),window.p.translate(this.x,this.y),window.p.rotate(t),window.p.fill(n),window.p.beginShape(),window.p.vertex(0,2*-this.r),window.p.vertex(-this.r,2*this.r),window.p.vertex(this.r,2*this.r),window.p.endShape(window.p.CLOSE),window.p.pop()}},{key:"detect",value:function(){var t=Math.sqrt(this.x,this.y,window.walker.x,window.walker.y)/Math.sqrt(Math.pow(this.WIDTH,2)+Math.pow(this.HEIGHT,2)),n=window.p.angleToPoint(this.x,this.y,window.walker.x,window.walker.y)/window.p.TWO_PI;return[(this.vx+this.MAX_SPEED)/this.MAX_SPEED,(this.vy+this.MAX_SPEED)/this.MAX_SPEED,(window.walker.vx+this.MAX_SPEED)/this.MAX_SPEED,(window.walker.vy+this.MAX_SPEED)/this.MAX_SPEED,n=isNaN(n)?0:n,t=isNaN(t)?0:t]}},{key:"detectMod",value:function(t,n,e,o){var i=Math.sqrt(this.x,this.y,t,n)/Math.sqrt(Math.pow(this.WIDTH,2)+Math.pow(this.HEIGHT,2)),s=window.p.angleToPoint(this.x,this.y,t,n)/window.p.TWO_PI;return[(this.vx+this.MAX_SPEED)/this.MAX_SPEED,(this.vy+this.MAX_SPEED)/this.MAX_SPEED,(e+this.MAX_SPEED)/this.MAX_SPEED,(o+this.MAX_SPEED)/this.MAX_SPEED,s=isNaN(s)?0:s,i=isNaN(i)?0:i]}}])&&o(n.prototype,e),i&&o(n,i),t}();n.a=i},V2ka:function(t,n,e){var o;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s,r={methods:e("6nyA"),Connection:e("+62V"),architect:e("bOL5"),Network:e("eeHM"),config:e("HvSW"),Group:e("Z1iQ"),Layer:e("q3Wu"),Node:e("L2Mg"),Neat:e("w7tI"),multi:e("tW6Z")};void 0===(o=function(){return r}.apply(n,[]))||(t.exports=o),t.exports&&(t.exports=r),"object"===("undefined"==typeof window?"undefined":i(window))&&(s=window.neataptic,r.ninja=function(){return window.neataptic=s,r},window.neataptic=r)},XZqd:function(t,n,e){var o={node:{TestWorker:e("9+vj")},browser:{TestWorker:e("M76f")}};t.exports=o},Ya6e:function(t,n){var e={LOGISTIC:function(t,n){var e=1/(1+Math.exp(-t));return n?e*(1-e):e},TANH:function(t,n){return n?1-Math.pow(Math.tanh(t),2):Math.tanh(t)},IDENTITY:function(t,n){return n?1:t},STEP:function(t,n){return n?0:t>0?1:0},RELU:function(t,n){return n?t>0?1:0:t>0?t:0},SOFTSIGN:function(t,n){var e=1+Math.abs(t);return n?t/Math.pow(e,2):t/e},SINUSOID:function(t,n){return n?Math.cos(t):Math.sin(t)},GAUSSIAN:function(t,n){var e=Math.exp(-Math.pow(t,2));return n?-2*t*e:e},BENT_IDENTITY:function(t,n){var e=Math.sqrt(Math.pow(t,2)+1);return n?t/(2*e)+1:(e-1)/2+t},BIPOLAR:function(t,n){return n?0:t>0?1:-1},BIPOLAR_SIGMOID:function(t,n){var e=2/(1+Math.exp(-t))-1;return n?.5*(1+e)*(1-e):e},HARD_TANH:function(t,n){return n?t>-1&&t<1?1:0:Math.max(-1,Math.min(1,t))},ABSOLUTE:function(t,n){return n?t<0?-1:1:Math.abs(t)},INVERSE:function(t,n){return n?-1:1-t},SELU:function(t,n){var e=1.6732632423543772,o=1.0507009873554805,i=t>0?t:e*Math.exp(t)-e;return n?t>0?o:(i+e)*o:i*o}};t.exports=e},Z1iQ:function(t,n,e){t.exports=a;var o=e("6nyA"),i=e("HvSW"),s=e("q3Wu"),r=e("L2Mg");function a(t){this.nodes=[],this.connections={in:[],out:[],self:[]};for(var n=0;n<t;n++)this.nodes.push(new r)}a.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var e=0;e<this.nodes.length;e++){var o;o=void 0===t?this.nodes[e].activate():this.nodes[e].activate(t[e]),n.push(o)}return n},propagate:function(t,n,e){if(void 0!==e&&e.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var o=this.nodes.length-1;o>=0;o--)void 0===e?this.nodes[o].propagate(t,n,!0):this.nodes[o].propagate(t,n,!0,e[o])},connect:function(t,n,e){var h,c,u=[];if(t instanceof a){if(void 0===n&&(this!==t?(i.warnings,n=o.connection.ALL_TO_ALL):(i.warnings,n=o.connection.ONE_TO_ONE)),n===o.connection.ALL_TO_ALL||n===o.connection.ALL_TO_ELSE){for(h=0;h<this.nodes.length;h++)for(c=0;c<t.nodes.length;c++)if(n!==o.connection.ALL_TO_ELSE||this.nodes[h]!==t.nodes[c]){var l=this.nodes[h].connect(t.nodes[c],e);this.connections.out.push(l[0]),t.connections.in.push(l[0]),u.push(l[0])}}else if(n===o.connection.ONE_TO_ONE){if(this.nodes.length!==t.nodes.length)throw new Error("From and To group must be the same size!");for(h=0;h<this.nodes.length;h++){var f=this.nodes[h].connect(t.nodes[h],e);this.connections.self.push(f[0]),u.push(f[0])}}}else if(t instanceof s)u=t.input(this,n,e);else if(t instanceof r)for(h=0;h<this.nodes.length;h++){var p=this.nodes[h].connect(t,e);this.connections.out.push(p[0]),u.push(p[0])}return u},gate:function(t,n){if(void 0===n)throw new Error("Please specify Gating.INPUT, Gating.OUTPUT");Array.isArray(t)||(t=[t]);var e,i,s=[],r=[];for(e=0;e<t.length;e++){var a=t[e];s.includes(a.from)||s.push(a.from),r.includes(a.to)||r.push(a.to)}switch(n){case o.gating.INPUT:for(e=0;e<r.length;e++){var h=r[e],c=this.nodes[e%this.nodes.length];for(i=0;i<h.connections.in.length;i++){var u=h.connections.in[i];t.includes(u)&&c.gate(u)}}break;case o.gating.OUTPUT:for(e=0;e<s.length;e++){var l=s[e],f=this.nodes[e%this.nodes.length];for(i=0;i<l.connections.out.length;i++){var p=l.connections.out[i];t.includes(p)&&f.gate(p)}}break;case o.gating.SELF:for(e=0;e<s.length;e++){var d=s[e],v=this.nodes[e%this.nodes.length];t.includes(d.connections.self)&&v.gate(d.connections.self)}}},set:function(t){for(var n=0;n<this.nodes.length;n++)void 0!==t.bias&&(this.nodes[n].bias=t.bias),this.nodes[n].squash=t.squash||this.nodes[n].squash,this.nodes[n].type=t.type||this.nodes[n].type},disconnect:function(t,n){var e,o,i;if(n=n||!1,t instanceof a)for(e=0;e<this.nodes.length;e++)for(o=0;o<t.nodes.length;o++){for(this.nodes[e].disconnect(t.nodes[o],n),i=this.connections.out.length-1;i>=0;i--){var s=this.connections.out[i];if(s.from===this.nodes[e]&&s.to===t.nodes[o]){this.connections.out.splice(i,1);break}}if(n)for(i=this.connections.in.length-1;i>=0;i--){var h=this.connections.in[i];if(h.from===t.nodes[o]&&h.to===this.nodes[e]){this.connections.in.splice(i,1);break}}}else if(t instanceof r)for(e=0;e<this.nodes.length;e++){for(this.nodes[e].disconnect(t,n),o=this.connections.out.length-1;o>=0;o--){var c=this.connections.out[o];if(c.from===this.nodes[e]&&c.to===t){this.connections.out.splice(o,1);break}}if(n)for(o=this.connections.in.length-1;o>=0;o--){var u=this.connections.in[o];if(u.from===t&&u.to===this.nodes[e]){this.connections.in.splice(o,1);break}}}},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()}}},bOL5:function(t,n,e){var o=e("6nyA"),i=e("eeHM"),s=e("Z1iQ"),r=e("q3Wu"),a=e("L2Mg"),h={Construct:function(t){var n,e=new i(0,0),o=[];for(n=0;n<t.length;n++){var h=void 0;if(t[n]instanceof s)for(h=0;h<t[n].nodes.length;h++)o.push(t[n].nodes[h]);else if(t[n]instanceof r)for(h=0;h<t[n].nodes.length;h++)for(var c=0;c<t[n].nodes[h].nodes.length;c++)o.push(t[n].nodes[h].nodes[c]);else t[n]instanceof a&&o.push(t[n])}var u=[],l=[];for(n=o.length-1;n>=0;n--)"output"===o[n].type||o[n].connections.out.length+o[n].connections.gated.length===0?(o[n].type="output",e.output++,l.push(o[n]),o.splice(n,1)):"input"!==o[n].type&&o[n].connections.in.length||(o[n].type="input",e.input++,u.push(o[n]),o.splice(n,1));if(o=u.concat(o).concat(l),0===e.input||0===e.output)throw new Error("Given nodes have no clear input/output node!");for(n=0;n<o.length;n++){var f=void 0;for(f=0;f<o[n].connections.out.length;f++)e.connections.push(o[n].connections.out[f]);for(f=0;f<o[n].connections.gated.length;f++)e.gates.push(o[n].connections.gated[f]);0!==o[n].connections.self.weight&&e.selfconns.push(o[n].connections.self)}return e.nodes=o,e},Perceptron:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");var n=[];n.push(new s(t[0]));for(var e=1;e<t.length;e++){var i=t[e];i=new s(i),n.push(i),n[e-1].connect(n[e],o.connection.ALL_TO_ALL)}return h.Construct(n)},Random:function(t,n,e,s){var r,a=(s=s||{}).connections||2*n,h=s.backconnections||0,c=s.selfconnections||0,u=s.gates||0,l=new i(t,e);for(r=0;r<n;r++)l.mutate(o.mutation.ADD_NODE);for(r=0;r<a-n;r++)l.mutate(o.mutation.ADD_CONN);for(r=0;r<h;r++)l.mutate(o.mutation.ADD_BACK_CONN);for(r=0;r<c;r++)l.mutate(o.mutation.ADD_SELF_CONN);for(r=0;r<u;r++)l.mutate(o.mutation.ADD_GATE);return l},LSTM:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("You have to specify at least 3 layers");var n,e=t.pop();"number"==typeof e?(n=new s(e),e={}):n=new s(t.pop()),n.set({type:"output"});var i={};i.memoryToMemory=e.memoryToMemory||!1,i.outputToMemory=e.outputToMemory||!1,i.outputToGates=e.outputToGates||!1,i.inputToOutput=void 0===e.inputToOutput||e.inputToOutput,i.inputToDeep=void 0===e.inputToDeep||e.inputToDeep;var r=new s(t.shift());r.set({type:"input"});var a=t,c=[];c.push(r);for(var u=r,l=0;l<a.length;l++){var f=a[l],p=new s(f),d=new s(f),v=new s(f),g=new s(f),w=l===a.length-1?n:new s(f);p.set({bias:1}),d.set({bias:1}),g.set({bias:1});var m=u.connect(v,o.connection.ALL_TO_ALL);u.connect(p,o.connection.ALL_TO_ALL),u.connect(g,o.connection.ALL_TO_ALL),u.connect(d,o.connection.ALL_TO_ALL),v.connect(p,o.connection.ALL_TO_ALL),v.connect(d,o.connection.ALL_TO_ALL),v.connect(g,o.connection.ALL_TO_ALL);var O=v.connect(v,o.connection.ONE_TO_ONE),y=v.connect(w,o.connection.ALL_TO_ALL);if(p.gate(m,o.gating.INPUT),d.gate(O,o.gating.SELF),g.gate(y,o.gating.OUTPUT),i.inputToDeep&&l>0){var E=r.connect(v,o.connection.ALL_TO_ALL);p.gate(E,o.gating.INPUT)}if(i.memoryToMemory){var A=v.connect(v,o.connection.ALL_TO_ELSE);p.gate(A,o.gating.INPUT)}if(i.outputToMemory){var _=n.connect(v,o.connection.ALL_TO_ALL);p.gate(_,o.gating.INPUT)}i.outputToGates&&(n.connect(p,o.connection.ALL_TO_ALL),n.connect(d,o.connection.ALL_TO_ALL),n.connect(g,o.connection.ALL_TO_ALL)),c.push(p),c.push(d),c.push(v),c.push(g),l!==a.length-1&&c.push(w),u=w}return i.inputToOutput&&r.connect(n,o.connection.ALL_TO_ALL),c.push(n),h.Construct(c)},GRU:function(){var t=Array.prototype.slice.call(arguments);if(t.length<3)throw new Error("not enough layers (minimum 3) !!");var n=new s(t.shift()),e=new s(t.pop()),o=t,i=[];i.push(n);for(var a=n,c=0;c<o.length;c++){var u=new r.GRU(o[c]);a.connect(u),a=u,i.push(u)}return a.connect(e),i.push(e),h.Construct(i)},Hopfield:function(t){var n=new s(t),e=new s(t);return n.connect(e,o.connection.ALL_TO_ALL),n.set({type:"input"}),e.set({squash:o.activation.STEP,type:"output"}),new h.Construct([n,e])},NARX:function(t,n,e,i,s){Array.isArray(n)||(n=[n]);var a=[],c=new r.Dense(t),u=new r.Memory(t,i),l=[],f=new r.Dense(e),p=new r.Memory(e,s);a.push(c),a.push(p);for(var d=0;d<n.length;d++){var v=new r.Dense(n[d]);l.push(v),a.push(v),void 0!==l[d-1]&&l[d-1].connect(v,o.connection.ALL_TO_ALL)}return a.push(u),a.push(f),c.connect(l[0],o.connection.ALL_TO_ALL),c.connect(u,o.connection.ONE_TO_ONE,1),u.connect(l[0],o.connection.ALL_TO_ALL),l[l.length-1].connect(f,o.connection.ALL_TO_ALL),f.connect(p,o.connection.ONE_TO_ONE,1),p.connect(l[0],o.connection.ALL_TO_ALL),c.set({type:"input"}),f.set({type:"output"}),h.Construct(a)}};t.exports=h},cwAw:function(t,n,e){"use strict";function o(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function(){function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=n,this.y=e,this.vx=0,this.vy=0,this.WIDTH=900,this.HEIGHT=500,this.MAX_SPEED=5,this.SCORE_RADIUS=100,this.r=10,this.angle=Math.random()*Math.PI*2}var n,e,i;return n=t,(e=[{key:"update",value:function(){Math.random()>.5&&(this.angle+=2*Math.random()-1),this.ax=Math.cos(this.angle),this.ay=Math.sin(this.angle),this.vx+=this.ax,this.vy+=this.ay,this.vx=this.vx>this.MAX_SPEED/2?this.MAX_SPEED/2:this.vx<-this.MAX_SPEED/2?-this.MAX_SPEED/2:this.vx,this.vy=this.vy>this.MAX_SPEED/2?this.MAX_SPEED/2:this.vy<-this.MAX_SPEED/2?-this.MAX_SPEED/2:this.vy,this.x+=this.vx,this.y+=this.vy,this.x=this.x>=this.WIDTH?this.WIDTH:this.x<=0?0:this.x,this.y=this.y>=this.HEIGHT?this.HEIGHT:this.y<=0?0:this.y,0!==this.x&&this.x!==this.WIDTH||(this.vx=-this.vx,this.angle+=Math.PI),0!==this.y&&this.y!==this.HEIGHT||(this.vy=-this.vy,this.angle+=Math.PI)}},{key:"reset",value:function(){this.x=this.WIDTH/2,this.y=this.HEIGHT/2,this.vx=0,this.vy=0,this.angle=Math.random()*Math.PI*2}},{key:"show",value:function(){window.p.fill(0),window.p.ellipse(this.x,this.y,2*this.r),window.p.noFill(),window.p.stroke("lightgreen"),window.p.strokeWeight(2),window.p.ellipse(this.x,this.y,2*this.SCORE_RADIUS),window.p.noStroke()}}])&&o(n.prototype,e),i&&o(n,i),t}();n.a=i},eeHM:function(t,n,e){function o(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,n,e,o,i,s,r){try{var a=t[s](r),h=a.value}catch(t){return void e(t)}a.done?n(h):Promise.resolve(h).then(o,i)}t.exports=f;var s=e("tW6Z"),r=e("6nyA"),a=e("+62V"),h=e("HvSW"),c=e("w7tI"),u=e("L2Mg"),l=r.mutation;function f(t,n){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t||void 0===n)throw new Error("No input or output size given");this.input=t,this.output=n,this.nodes=[],this.connections=[],this.gates=[],this.selfconns=[],this.maxHiddenNodes=10,this.dropout=0;for(var e=0;e<this.input+this.output;e++){var o=e<this.input?"input":"output";this.nodes.push(new u(o))}for(var i=0;i<this.input;i++)for(var s=this.input;s<this.output+this.input;s++){var r=Math.random()*this.input*Math.sqrt(2/this.input);this.connect(this.nodes[i],this.nodes[s],r)}}f.prototype={activate:function(t,n){for(var e=[],o=0;o<this.nodes.length;o++)if("input"===this.nodes[o].type)this.nodes[o].activate(t[o]);else if("output"===this.nodes[o].type){var i=this.nodes[o].activate();e.push(i)}else n&&(this.nodes[o].mask=Math.random()<this.dropout?0:1),this.nodes[o].activate();return e},optimiseAF:function(t,n,e){for(var o=new e(t.x,t.y,t.w,t.h),i=new n(this,t.x,t.y,t.w,t.h),s=[],a=0;a<=10;a++)s.push(i);for(var h=10;h<=10;h++){s[h].brain.nodes.forEach(function(t){return t.squash=(n=Object.keys(r.activation),e=Math.floor(Math.random()*n.length),r.activation[n[e]]);var n,e});for(var c=0;c<=250;c++)o.update(),s[h].updateMod(o.x,o.y,o.vx,o.vy);o.reset()}return s.sort(function(t,n){return t.brain.score>n.brain.score?1:n.brain.score>t.brain.score?-1:0}),s[0].brain},optimiseNT:function(t,n,e){for(var o=new e(t.x,t.y,t.w,t.h),i=new n(this,t.x,t.y,t.w,t.h),s=[],a=0;a<=10;a++)s.push(i);for(var h=0;h<=10;h++){for(var c=11*Math.random(),u=11*Math.random(),l=0;l<=c;l++)s[h].brain.mutate(r.mutation.ADD_NODE);for(var f=0;f<=u;f++)s[h].brain.mutate(r.mutation.SUB_NODE);for(var p=0;p<=250;p++)s[h].updateMod(o.x,o.y,o.vx,o.vy),o.update();o.reset()}return s.sort(function(t,n){return t.brain.score>n.brain.score?1:n.brain.score>t.brain.score?-1:0}),s[0].brain},noTraceActivate:function(t){for(var n=[],e=0;e<this.nodes.length;e++)if("input"===this.nodes[e].type)this.nodes[e].noTraceActivate(t[e]);else if("output"===this.nodes[e].type){var o=this.nodes[e].noTraceActivate();n.push(o)}else this.nodes[e].noTraceActivate();return n},propagate:function(t,n,e,o){if(void 0===o||o.length!==this.output)throw new Error("Output target length should match network output length");var i,s=o.length;for(i=this.nodes.length-1;i>=this.nodes.length-this.output;i--)this.nodes[i].propagate(t,n,e,o[--s]);for(i=this.nodes.length-this.output-1;i>=this.input;i--)this.nodes[i].propagate(t,n,e)},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()},connect:function(t,n,e){for(var o=t.connect(n,e),i=0;i<o.length;i++){var s=o[i];t!==n?this.connections.push(s):this.selfconns.push(s)}return o},disconnect:function(t,n){for(var e=t===n?this.selfconns:this.connections,o=0;o<e.length;o++){var i=e[o];if(i.from===t&&i.to===n){null!==i.gater&&this.ungate(i),e.splice(o,1);break}}t.disconnect(n)},gate:function(t,n){if(-1===this.nodes.indexOf(t))throw new Error("This node is not part of the network!");null==n.gater?(t.gate(n),this.gates.push(n)):h.warnings},ungate:function(t){var n=this.gates.indexOf(t);if(-1===n)throw new Error("This connection is not gated!");this.gates.splice(n,1),t.gater.ungate(t)},remove:function(t){var n=this.nodes.indexOf(t);if(-1===n)throw new Error("This node does not exist in the network!");var e=[];this.disconnect(t,t);for(var o=[],i=t.connections.in.length-1;i>=0;i--){var s=t.connections.in[i];l.SUB_NODE.keep_gates&&null!==s.gater&&s.gater!==t&&e.push(s.gater),o.push(s.from),this.disconnect(s.from,t)}var r=[];for(i=t.connections.out.length-1;i>=0;i--){var a=t.connections.out[i];l.SUB_NODE.keep_gates&&null!==a.gater&&a.gater!==t&&e.push(a.gater),r.push(a.to),this.disconnect(t,a.to)}var h=[];for(i=0;i<o.length;i++)for(var c=o[i],u=0;u<r.length;u++){var f=r[u];if(!c.isProjectingTo(f)){var p=this.connect(c,f);h.push(p[0])}}for(i=0;i<e.length&&0!==h.length;i++){var d=e[i],v=Math.floor(Math.random()*h.length);this.gate(d,h[v]),h.splice(v,1)}for(i=t.connections.gated.length-1;i>=0;i--){var g=t.connections.gated[i];this.ungate(g)}this.disconnect(t,t),this.nodes.splice(n,1)},mutate:function(t){if(void 0===t)throw new Error("No (correct) mutate method given!");var n,e,o=performance.now();switch(t){case l.ADD_NODE:var i=(E=this.connections[Math.floor(Math.random()*this.connections.length)]).gater;this.disconnect(E.from,E.to);var s=this.nodes.indexOf(E.to),r=new u("hidden"),a=Math.min(s,this.nodes.length-this.output);this.nodes.splice(a,0,r);var c=this.connect(E.from,r)[0],f=this.connect(r,E.to)[0];null!=i&&this.gate(i,Math.random()>=.5?c:f);break;case l.SUB_NODE:if(this.nodes.length===this.input+this.output){h.warnings;break}var p=Math.floor(Math.random()*(this.nodes.length-this.output-this.input)+this.input);this.remove(this.nodes[p]);break;case l.ADD_CONN:var d=[];for(n=0;n<this.nodes.length-this.output;n++){var v=this.nodes[n];for(e=Math.max(n+1,this.input);e<this.nodes.length;e++){var g=this.nodes[e];v.isProjectingTo(g)||d.push([v,g])}}if(0===d.length){h.warnings;break}var w=d[Math.floor(Math.random()*d.length)];this.connect(w[0],w[1]);break;case l.SUB_CONN:var m=[];for(n=0;n<this.connections.length;n++){var O=this.connections[n];O.from.connections.out.length>1&&O.to.connections.in.length>1&&this.nodes.indexOf(O.to)>this.nodes.indexOf(O.from)&&m.push(O)}if(0===m.length){h.warnings;break}var y=m[Math.floor(Math.random()*m.length)];this.disconnect(y.from,y.to);break;case l.MOD_WEIGHT:var E=(M=this.connections.concat(this.selfconns))[Math.floor(Math.random()*M.length)],A=Math.random()*(t.max-t.min)+t.min;E.weight+=A;break;case l.MOD_BIAS:p=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input);(r=this.nodes[p]).mutate(t);break;case l.MOD_ACTIVATION:if(!t.mutateOutput&&this.input+this.output===this.nodes.length){h.warnings;break}p=Math.floor(Math.random()*(this.nodes.length-(t.mutateOutput?0:this.output)-this.input)+this.input);(r=this.nodes[p]).mutate(t);break;case l.ADD_SELF_CONN:m=[];for(n=this.input;n<this.nodes.length;n++){var _=this.nodes[n];0===_.connections.self.weight&&m.push(_)}if(0===m.length){h.warnings;break}r=m[Math.floor(Math.random()*m.length)];this.connect(r,r);break;case l.SUB_SELF_CONN:if(0===this.selfconns.length){h.warnings;break}var S=this.selfconns[Math.floor(Math.random()*this.selfconns.length)];this.disconnect(S.from,S.to);break;case l.ADD_GATE:var M=this.connections.concat(this.selfconns);m=[];for(n=0;n<M.length;n++){var T=M[n];null===T.gater&&m.push(T)}if(0===m.length){h.warnings;break}p=Math.floor(Math.random()*(this.nodes.length-this.input)+this.input),r=this.nodes[p],S=m[Math.floor(Math.random()*m.length)];this.gate(r,S);break;case l.SUB_GATE:if(0===this.gates.length){h.warnings;break}p=Math.floor(Math.random()*this.gates.length);var b=this.gates[p];this.ungate(b);break;case l.ADD_BACK_CONN:d=[];for(n=this.input;n<this.nodes.length;n++){var N=this.nodes[n];for(e=this.input;e<n;e++){var x=this.nodes[e];N.isProjectingTo(x)||d.push([N,x])}}if(0===d.length){h.warnings;break}w=d[Math.floor(Math.random()*d.length)];this.connect(w[0],w[1]);break;case l.SUB_BACK_CONN:m=[];for(n=0;n<this.connections.length;n++){var D=this.connections[n];D.from.connections.out.length>1&&D.to.connections.in.length>1&&this.nodes.indexOf(D.from)>this.nodes.indexOf(D.to)&&m.push(D)}if(0===m.length){h.warnings;break}y=m[Math.floor(Math.random()*m.length)];this.disconnect(y.from,y.to);break;case l.SWAP_NODES:if(t.mutateOutput&&this.nodes.length-this.input<2||!t.mutateOutput&&this.nodes.length-this.input-this.output<2){h.warnings;break}p=Math.floor(Math.random()*(this.nodes.length-(t.mutateOutput?0:this.output)-this.input)+this.input);var L=this.nodes[p];p=Math.floor(Math.random()*(this.nodes.length-(t.mutateOutput?0:this.output)-this.input)+this.input);var I=this.nodes[p],P=L.bias,k=L.squash;L.bias=I.bias,L.squash=I.squash,I.bias=P,I.squash=k}var U=performance.now()-o;window.results.generations[window.generation].mutationTimes.push(U)},train:function(t,n){if(t[0].input.length!==this.input||t[0].output.length!==this.output)throw new Error("Dataset input/output size should be same as network input/output size!");void 0===(n=n||{}).rate&&h.warnings,void 0===n.iterations&&h.warnings;var e=n.error||.05,o=n.cost||r.cost.MSE,i=n.rate||.3,s=n.dropout||0,a=n.momentum||0,c=n.batchSize||1,u=n.ratePolicy||r.rate.FIXED(),l=Date.now();if(c>t.length)throw new Error("Batch size must be smaller or equal to dataset length!");if(void 0===n.iterations&&void 0===n.error)throw new Error("At least one of the following options must be specified: error, iterations");if(void 0===n.error?e=-1:void 0===n.iterations&&(n.iterations=0),this.dropout=s,n.crossValidate)var f=Math.ceil((1-n.crossValidate.testSize)*t.length),p=t.slice(0,f),d=t.slice(f);for(var v,g,w,m=i,O=0,y=1;y>e&&(0===n.iterations||O<n.iterations)&&!(n.crossValidate&&y<=n.crossValidate.testError);){if(m=u(i,++O),n.crossValidate?(this._trainSet(p,c,m,a,o),n.clear&&this.clear(),y=this.test(d,o).error,n.clear&&this.clear()):(y=this._trainSet(t,c,m,a,o),n.clear&&this.clear()),n.shuffle)for(v=t.length;v;g=Math.floor(Math.random()*v),w=t[--v],t[v]=t[g],t[g]=w);n.log&&n.log,n.schedule&&O%n.schedule.iterations==0&&n.schedule.function({error:y,iteration:O})}if(n.clear&&this.clear(),s)for(v=0;v<this.nodes.length;v++)"hidden"!==this.nodes[v].type&&"constant"!==this.nodes[v].type||(this.nodes[v].mask=1-this.dropout);return{error:y,iterations:O,time:Date.now()-l}},_trainSet:function(t,n,e,o,i){for(var s=0,r=0;r<t.length;r++){var a=t[r].input,h=t[r].output,c=!((r+1)%n!=0&&r+1!==t.length),u=this.activate(a,!0);this.propagate(e,o,c,h),s+=i(h,u)}return s/t.length},test:function(t){var n,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.cost.MSE;if(this.dropout)for(n=0;n<this.nodes.length;n++)"hidden"!==this.nodes[n].type&&"constant"!==this.nodes[n].type||(this.nodes[n].mask=1-this.dropout);var o=0,i=Date.now();for(n=0;n<t.length;n++){var s=t[n].input;o+=e(t[n].output,this.noTraceActivate(s))}return{error:o/=t.length,time:Date.now()-i}},graph:function(t,n){var e,o=0,i=0,s={nodes:[],links:[],constraints:[{type:"alignment",axis:"x",offsets:[]},{type:"alignment",axis:"y",offsets:[]}]};for(e=0;e<this.nodes.length;e++){var r=this.nodes[e];"input"===r.type?(1===this.input?s.constraints[0].offsets.push({node:e,offset:0}):s.constraints[0].offsets.push({node:e,offset:.8*t/(this.input-1)*o++}),s.constraints[1].offsets.push({node:e,offset:0})):"output"===r.type&&(1===this.output?s.constraints[0].offsets.push({node:e,offset:0}):s.constraints[0].offsets.push({node:e,offset:.8*t/(this.output-1)*i++}),s.constraints[1].offsets.push({node:e,offset:-.8*n})),s.nodes.push({id:e,name:"hidden"===r.type?r.squash.name:r.type.toUpperCase(),activation:r.activation,bias:r.bias})}var a=this.connections.concat(this.selfconns);for(e=0;e<a.length;e++){var h=a[e];if(null==h.gater)s.links.push({source:this.nodes.indexOf(h.from),target:this.nodes.indexOf(h.to),weight:h.weight});else{var c=s.nodes.length;s.nodes.push({id:c,activation:h.gater.activation,name:"GATE"}),s.links.push({source:this.nodes.indexOf(h.from),target:c,weight:.5*h.weight}),s.links.push({source:c,target:this.nodes.indexOf(h.to),weight:.5*h.weight}),s.links.push({source:this.nodes.indexOf(h.gater),target:c,weight:h.gater.activation,gate:!0})}}return s},toJSON:function(){var t,n={nodes:[],connections:[],input:this.input,output:this.output,dropout:this.dropout};for(t=0;t<this.nodes.length;t++)this.nodes[t].index=t;for(t=0;t<this.nodes.length;t++){var e=this.nodes[t],o=e.toJSON();if(o.index=t,n.nodes.push(o),0!==e.connections.self.weight){var i=e.connections.self.toJSON();i.from=t,i.to=t,i.gater=null!=e.connections.self.gater?e.connections.self.gater.index:null,n.connections.push(i)}}for(t=0;t<this.connections.length;t++){var s=this.connections[t],r=s.toJSON();r.from=s.from.index,r.to=s.to.index,r.gater=null!=s.gater?s.gater.index:null,n.connections.push(r)}return n},set:function(t){for(var n=0;n<this.nodes.length;n++)this.nodes[n].bias=t.bias||this.nodes[n].bias,this.nodes[n].squash=t.squash||this.nodes[n].squash},evolve:function(){var t,n=(t=regeneratorRuntime.mark(function t(n,o){var i,a,h,u,l,f,p,d,v,g,w,m,O,y,E,A;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n[0].input.length===this.input&&n[0].output.length===this.output){t.next=2;break}throw new Error("Dataset input/output size should be same as network input/output size!");case 2:if(i=void 0!==(o=o||{}).error?o.error:.05,a=void 0!==o.growth?o.growth:1e-4,h=o.cost||r.cost.MSE,u=o.amount||1,void 0===(l=o.threads)&&(l="undefined"==typeof window?e("PENG").cpus().length:navigator.hardwareConcurrency),f=Date.now(),void 0!==o.iterations||void 0!==o.error){t.next=15;break}throw new Error("At least one of the following options must be specified: error, iterations");case 15:void 0===o.error?i=-1:void 0===o.iterations&&(o.iterations=0);case 16:if(1===l)p=function(t){for(var e=0,o=0;o<u;o++)e-=t.test(n,h).error;return e-=(t.nodes.length-t.input-t.output+t.connections.length+t.gates.length)*a,(e=isNaN(e)?-1/0:e)/u};else{if(d=s.serializeDataSet(n),v=[],"undefined"==typeof window)for(g=0;g<l;g++)v.push(new s.workers.node.TestWorker(d,h));else for(g=0;g<l;g++)v.push(new s.workers.browser.TestWorker(d,h));p=function(t){return new Promise(function(n,e){for(var o=t.slice(),i=0,s=function t(e){if(o.length){var s=o.shift();e.evaluate(s).then(function(n){s.score=-n,s.score-=(s.nodes.length-s.input-s.output+s.connections.length+s.gates.length)*a,s.score=isNaN(parseFloat(n))?-1/0:s.score,t(e)})}else++i===l&&n()},r=0;r<v.length;r++)s(v[r])})},o.fitnessPopulation=!0}o.network=this,w=new c(this.input,this.output,p,o),m=-1/0,O=-1/0;case 21:if(!(m<-i&&(0===o.iterations||w.generation<o.iterations))){t.next=32;break}return t.next=24,w.evolve();case 24:E=t.sent,A=E.score,m=A+(E.nodes.length-E.input-E.output+E.connections.length+E.gates.length)*a,A>O&&(O=A,y=E),o.log&&(w.generation,o.log),o.schedule&&w.generation%o.schedule.iterations==0&&o.schedule.function({fitness:A,error:-m,iteration:w.generation}),t.next=21;break;case 32:if(l>1)for(g=0;g<v.length;g++)v[g].terminate();return void 0!==y&&(this.nodes=y.nodes,this.connections=y.connections,this.selfconns=y.selfconns,this.gates=y.gates,o.clear&&this.clear()),t.abrupt("return",{error:-m,iterations:w.generation,time:Date.now()-f});case 35:case"end":return t.stop()}},t,this)}),function(){var n=this,e=arguments;return new Promise(function(o,s){var r=t.apply(n,e);function a(t){i(r,o,s,a,h,"next",t)}function h(t){i(r,o,s,a,h,"throw",t)}a(void 0)})});return function(t,e){return n.apply(this,arguments)}}(),standalone:function(){var t,n=[],e=[],o=[],i=[],s=[];for(t=0;t<this.input;t++){var r=this.nodes[t];e.push(r.activation),o.push(r.state)}for(i.push("for(var i = 0; i < input.length; i++) A[i] = input[i];"),t=0;t<this.nodes.length;t++)this.nodes[t].index=t;for(t=this.input;t<this.nodes.length;t++){var a=this.nodes[t];e.push(a.activation),o.push(a.state);var h=n.indexOf(a.squash.name);-1===h&&(h=n.length,n.push(a.squash.name),s.push(a.squash.toString()));for(var c=[],u=0;u<a.connections.in.length;u++){var l=a.connections.in[u],f="A[".concat(l.from.index,"] * ").concat(l.weight);null!=l.gater&&(f+=" * A[".concat(l.gater.index,"]")),c.push(f)}if(a.connections.self.weight){var p=a.connections.self,d="S[".concat(t,"] * ").concat(p.weight);null!=p.gater&&(d+=" * A[".concat(p.gater.index,"]")),c.push(d)}var v="S[".concat(t,"] = ").concat(c.join(" + ")," + ").concat(a.bias,";"),g="A[".concat(t,"] = F[").concat(h,"](S[").concat(t,"])").concat(a.mask?"":" * "+a.mask,";");i.push(v),i.push(g)}var w=[];for(t=this.nodes.length-this.output;t<this.nodes.length;t++)w.push("A[".concat(t,"]"));w="return [".concat(w.join(","),"];"),i.push(w);var m="";return m+="var F = [".concat(s.toString(),"];\r\n"),m+="var A = [".concat(e.toString(),"];\r\n"),m+="var S = [".concat(o.toString(),"];\r\n"),m+="function activate(input){\r\n".concat(i.join("\r\n"),"\r\n}")},serialize:function(){var t,n=[],e=[],o=[],i=["LOGISTIC","TANH","IDENTITY","STEP","RELU","SOFTSIGN","SINUSOID","GAUSSIAN","BENT_IDENTITY","BIPOLAR","BIPOLAR_SIGMOID","HARD_TANH","ABSOLUTE","INVERSE","SELU"];for(o.push(this.input),o.push(this.output),t=0;t<this.nodes.length;t++){var s=this.nodes[t];s.index=t,n.push(s.activation),e.push(s.state)}for(t=this.input;t<this.nodes.length;t++){var r=this.nodes[t];o.push(r.index),o.push(r.bias),o.push(i.indexOf(r.squash.name)),o.push(r.connections.self.weight),o.push(null==r.connections.self.gater?-1:r.connections.self.gater.index);for(var a=0;a<r.connections.in.length;a++){var h=r.connections.in[a];o.push(h.from.index),o.push(h.weight),o.push(null==h.gater?-1:h.gater.index)}o.push(-2)}return[n,e,o]},getHiddenNodeCount:function(){return this.nodes.length-this.input-this.output}},f.fromJSON=function(t){var n,e=new f(t.input,t.output);for(e.dropout=t.dropout,e.nodes=[],e.connections=[],n=0;n<t.nodes.length;n++)e.nodes.push(u.fromJSON(t.nodes[n]));for(n=0;n<t.connections.length;n++){var o=t.connections[n],i=e.connect(e.nodes[o.from],e.nodes[o.to])[0];i.weight=o.weight,null!=o.gater&&e.gate(e.nodes[o.gater],i)}return e},f.merge=function(t,n){if(t=f.fromJSON(t.toJSON()),n=f.fromJSON(n.toJSON()),t.output!==n.input)throw new Error("Output size of network1 should be the same as the input size of network2!");var e;for(e=0;e<n.connections.length;e++){var o=n.connections[e];if("input"===o.from.type){var i=n.nodes.indexOf(o.from);o.from=t.nodes[t.nodes.length-1-i]}}for(e=n.input-1;e>=0;e--)n.nodes.splice(e,1);for(e=t.nodes.length-t.output;e<t.nodes.length;e++)t.nodes[e].type="hidden";return t.connections=t.connections.concat(n.connections),t.nodes=t.nodes.concat(n.nodes),t},f.crossOver=function(t,n,e){if(t.input!==n.input||t.output!==n.output)throw new Error("Networks don't have the same input/output size!");var i,s=performance.now();switch(r.crossover.UNIFORM){case r.crossover.SINGLE_POINT:var h=function(t){return t.nodes.length-t.input-t.output};t.nodes.map(function(t,n){return t.index=n}),n.nodes.map(function(t,n){return t.index=n});var c=h(t)+t.output,l=h(n)+n.output,p=t.input,d=Math.min(c,l),v=function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t}(p,d),g=t.nodes.slice(v,t.nodes.length-t.output),w=n.nodes.slice(v,n.nodes.length-n.output),m=new f(t.input,t.output,!1),O=new f(t.input,t.output,!1);O.nodes=[],O.connections=[],m.nodes=t.nodes.slice(0,v),O.nodes=n.nodes.slice(0,v),m.nodes=m.nodes.concat(w),O.nodes=O.nodes.concat(g);var y=t.nodes.slice(t.nodes.length-t.output,t.nodes.length),E=n.nodes.slice(n.nodes.length-n.output,n.nodes.length);if(m.nodes=[].concat(o(m.nodes),o(y)),O.nodes=[].concat(o(O.nodes),o(E)),m.nodes.length!==m.input+m.output)for(var A=0;A<=m.input-1;A++)for(var _=m.input;_<=m.nodes.length-1-m.output;_++){var S=m.nodes[A],M=m.nodes[_],T=Math.random()*this.input*Math.sqrt(2/this.input);m.connect(S,M,T)}else for(var b=0;b<m.input;b++)for(var N=m.input;N<m.output+m.input;N++){var x=Math.random()*m.input*Math.sqrt(2/m.input);m.connect(m.nodes[b],m.nodes[N],x)}if(O.nodes.length!==O.input+O.output)for(var D=0;D<=O.input-1;D++)for(var L=O.input;L<=O.nodes.length-1-O.output;L++){var I=O.nodes[D],P=O.nodes[L],k=Math.random()*m.input*Math.sqrt(2/m.input);O.connect(I,P,k)}else for(var U=0;U<O.input;U++)for(var C=O.input;C<O.output+O.input;C++){var R=Math.random()*O.input*Math.sqrt(2/O.input);O.connect(O.nodes[U],O.nodes[C],R)}i=Math.floor(11*Math.random()<=.5)?m:O;break;case r.crossover.TWO_POINT:break;case r.crossover.UNIFORM:(i=new f(t.input,t.output)).connections=[],i.nodes=[];var G,B=t.score||0,H=n.score||0;if(e||B===H){var W=Math.max(t.nodes.length,n.nodes.length),q=Math.min(t.nodes.length,n.nodes.length);G=Math.floor(Math.random()*(W-q+1)+q)}else G=B>H?t.nodes.length:n.nodes.length;var F,j=t.output;for(F=0;F<t.nodes.length;F++)t.nodes[F].index=F;for(F=0;F<n.nodes.length;F++)n.nodes[F].index=F;for(F=0;F<G;F++){var X;if(F<G-j){var z=Math.random();X=z>=.5?t.nodes[F]:n.nodes[F];var V=z<.5?t.nodes[F]:n.nodes[F];void 0!==X&&"output"!==X.type||(X=V)}else X=Math.random()>=.5?t.nodes[t.nodes.length+F-G]:n.nodes[n.nodes.length+F-G];var J=new u;J.bias=X.bias,J.squash=X.squash,J.type=X.type,i.nodes.push(J)}var Y={},K={};for(F=0;F<t.connections.length;F++){var Z=t.connections[F],Q={weight:Z.weight,from:Z.from.index,to:Z.to.index,gater:null!=Z.gater?Z.gater.index:-1};Y[a.innovationID(Q.from,Q.to)]=Q}for(F=0;F<t.selfconns.length;F++){var $=t.selfconns[F],tt={weight:$.weight,from:$.from.index,to:$.to.index,gater:null!=$.gater?$.gater.index:-1};Y[a.innovationID(tt.from,tt.to)]=tt}for(F=0;F<n.connections.length;F++){var nt=n.connections[F],et={weight:nt.weight,from:nt.from.index,to:nt.to.index,gater:null!=nt.gater?nt.gater.index:-1};K[a.innovationID(et.from,et.to)]=et}for(F=0;F<n.selfconns.length;F++){var ot=n.selfconns[F],it={weight:ot.weight,from:ot.from.index,to:ot.to.index,gater:null!=ot.gater?ot.gater.index:-1};K[a.innovationID(it.from,it.to)]=it}var st=[],rt=Object.keys(Y),at=Object.keys(K);for(F=rt.length-1;F>=0;F--)if(void 0!==K[rt[F]]){var ht=Math.random()>=.5?Y[rt[F]]:K[rt[F]];st.push(ht),K[rt[F]]=void 0}else(B>=H||e)&&st.push(Y[rt[F]]);if(H>=B||e)for(F=0;F<at.length;F++)void 0!==K[at[F]]&&st.push(K[at[F]]);for(F=0;F<st.length;F++){var ct=st[F];if(ct.to<G&&ct.from<G){var ut=i.nodes[ct.from],lt=i.nodes[ct.to],ft=i.connect(ut,lt)[0];ft.weight=ct.weight,-1!==ct.gater&&ct.gater<G&&i.gate(i.nodes[ct.gater],ft)}}}var pt=performance.now()-s;return window.results.generations[window.generation].crossoverTimes.push(pt),i}},h0c1:function(t,n,e){"use strict";(function(t){var o=e("q1tI"),i=e.n(o),s=e("kK8b"),r=e.n(s),a=e("/Is/"),h=e("SP5B"),c=e("17x9"),u=e.n(c),l=e("cwAw"),f=e("x0Xb");e("V2ka");function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,n){return(w=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function m(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var O=window.neataptic.Neat,y=window.neataptic.methods,E=function(n){function e(n){var o,i,s;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,s=v(e).call(this,n),m(g(o=!s||"object"!==p(s)&&"function"!=typeof s?g(i):s),"initNeat",function(){window.walker=new l.a(o.props.width/2,o.props.height/2,o.props.width,o.props.height),window.players=[],window.generation=0,t=new O(6,1,null,{popsize:o.PLAYER_AMOUNT,mutationRate:o.MUTATION_RATE,elitism:o.ELITISM,selection:y.selection.POWER,mutation:[y.mutation.ADD_NODE,y.mutation.SUB_NODE,y.mutation.ADD_CONN,y.mutation.SUB_CONN,y.mutation.MOD_WEIGHT,y.mutation.MOD_BIAS,y.mutation.MOD_ACTIVATION,y.mutation.ADD_SELF_CONN,y.mutation.SUB_SELF_CONN,y.mutation.ADD_GATE,y.mutation.SUB_GATE,y.mutation.ADD_BACK_CONN,y.mutation.SUB_BACK_CONN]});for(var n=0;n<=o.props.maxGenerations;n++)window.results.generations[n]={mutationTimes:[],crossoverTimes:[]}}),m(g(o),"startEvaluation",function(){for(var n in window.players=[],window.highestScore=0,t.population){n=t.population[n];var e=new h.a(n,o.props.width/2,o.props.height/2,o.props.width,o.props.height);window.players.push(e)}window.walker.reset()}),m(g(o),"endEvaluation",function(){var n=new CustomEvent("generationUpdate",{detail:{generation:t.generation,averageScore:Math.round(t.getAverage()),fittestScore:Math.round(t.getFittest().score),unfittestScore:Math.round(Math.min.apply(null,t.population.map(function(t){return t.score}))),allScores:t.population.map(function(t){return t.score})}});for(var e in t.population)(e=t.population[e]).score-=e.nodes.length*o.SCORE_RADIUS/10;t.sort();for(var i=[],s=0;s<t.elitism;s++)i.push(t.population[s]);for(var r=0;r<t.popsize-t.elitism;r++)i.push(t.getOffspring());t.population=i,t.mutate(),t.generation++,window.generation++,window.dispatchEvent(n),o.startEvaluation()}),o.SCORE_RADIUS=100,o.PLAYER_AMOUNT=100,o.ITERATIONS=250,o.MUTATION_RATE=.3,o.ELITISM=10,o.state={stateSketch:a.a},o}var o,s,c;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&w(t,n)}(e,i.a.Component),o=e,(s=[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{sketch:this.state.stateSketch,status:this.props.active,initNeat:this.initNeat,startEvaluation:this.startEvaluation,endEvaluation:this.endEvaluation.bind(this),width:this.props.width,height:this.props.height,iterations:this.ITERATIONS,maxGenerations:this.props.maxGenerations}))}}])&&d(o.prototype,s),c&&d(o,c),e}();E.defaultProps={active:!0,width:900,height:500,algorithm:f.a,maxGenerations:100},E.propTypes={active:u.a.bool,width:u.a.number,height:u.a.number,algorithm:u.a.string,maxGenerations:u.a.number},n.a=E}).call(this,e("10Yg"))},ldto:function(t,n,e){},ng4s:function(t,n,e){"use strict";e.r(n);var o=e("q1tI"),i=e.n(o),s=e("i8i4"),r=e.n(s),a=e("h0c1"),h=e("u72x"),c=e.n(h),u=e("b1Ic"),l=e.n(u),f=e("RuNc"),p=e.n(f),d=e("wmhZ"),v=e.n(d);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,n){return(y=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function E(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var A=function(t){function n(t){var e,o,i;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,i=m(n).call(this,t),E(O(e=!i||"object"!==g(i)&&"function"!=typeof i?O(o):i),"handleClick",function(){var t=e.state.active;e.setState({active:!t})}),E(O(e),"save",function(){var t=window.results;if(!t)throw new Error("Result object is ".concat(g(t)));var n=encodeURIComponent(JSON.stringify(t)),o="data:text/json;charset=utf-8,".concat(n);e.setState({dataStr:o,fileName:"results.json"})}),E(O(e),"update",function(t){var n=t.detail;Object.keys(n).forEach(function(t){var o=n[t];e.setState(E({},t,o)),"generation"!==t&&(window.results.generations[n.generation][t]=o)})}),E(O(e),"componentDidMount",function(){window.addEventListener("generationUpdate",e.update)}),window.results={generations:{}},e.state={active:!0,generation:null,averageScore:null,fittestScore:null,maxGenerations:100,dataStr:null,fileName:null},e}var e,o,s;return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&y(t,n)}(n,i.a.Component),e=n,(o=[{key:"render",value:function(){return i.a.createElement(l.a,null,i.a.createElement(p.a,null,i.a.createElement(v.a,null,i.a.createElement(a.a,{active:this.state.active,width:900,height:500,algorithm:this.state.value,maxGenerations:this.state.maxGenerations}))),i.a.createElement(p.a,null,i.a.createElement(v.a,null,i.a.createElement("h4",null,"Generation: ",this.state.generation),i.a.createElement("h4",null,"Average Score: ",this.state.averageScore),i.a.createElement("h4",null,"Best Score: ",this.state.fittestScore),i.a.createElement("hr",null))),i.a.createElement(p.a,null,i.a.createElement(v.a,null,i.a.createElement(c.a,{className:"w-100 mb-3",onClick:this.handleClick,variant:"primary",title:"Pause the simulation"},this.state.active?"Pause":"Resume"),i.a.createElement("a",{className:"btn btn-success d-block",style:{cursor:"pointer"},title:"Save Results as a JSON file",onClick:this.save,href:this.state.dataStr,download:this.state.fileName},"Save as JSON"))))}}])&&w(e.prototype,o),s&&w(e,s),n}();A.defaultProps={},A.propTypes={};var _=A;document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("app");null!==t&&r.a.render(i.a.createElement(i.a.Fragment,null,i.a.createElement(_,null)),t)})},pGbi:function(t,n){var e={CROSS_ENTROPY:function(t,n){for(var e=0,o=0;o<n.length;o++)e-=t[o]*Math.log(Math.max(n[o],1e-15))+(1-t[o])*Math.log(1-Math.max(n[o],1e-15));return e/n.length},MSE:function(t,n){for(var e=0,o=0;o<n.length;o++)e+=Math.pow(t[o]-n[o],2);return e/n.length},BINARY:function(t,n){for(var e=0,o=0;o<n.length;o++)e+=Math.round(2*t[o])!==Math.round(2*n[o]);return e},MAE:function(t,n){for(var e=0,o=0;o<n.length;o++)e+=Math.abs(t[o]-n[o]);return e/n.length},MAPE:function(t,n){for(var e=0,o=0;o<n.length;o++)e+=Math.abs((n[o]-t[o])/Math.max(t[o],1e-15));return e/n.length},MSLE:function(t,n){for(var e=0,o=0;o<n.length;o++)e+=Math.log(Math.max(t[o],1e-15))-Math.log(Math.max(n[o],1e-15));return e},HINGE:function(t,n){for(var e=0,o=0;o<n.length;o++)e+=Math.max(0,1-t[o]*n[o]);return e}};t.exports=e},q3Wu:function(t,n,e){t.exports=r;var o=e("6nyA"),i=e("Z1iQ"),s=e("L2Mg");function r(){this.output=null,this.nodes=[],this.connections={in:[],out:[],self:[]}}r.prototype={activate:function(t){var n=[];if(void 0!==t&&t.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var e=0;e<this.nodes.length;e++){var o;o=void 0===t?this.nodes[e].activate():this.nodes[e].activate(t[e]),n.push(o)}return n},propagate:function(t,n,e){if(void 0!==e&&e.length!==this.nodes.length)throw new Error("Array with values should be same as the amount of nodes!");for(var o=this.nodes.length-1;o>=0;o--)void 0===e?this.nodes[o].propagate(t,n,!0):this.nodes[o].propagate(t,n,!0,e[o])},connect:function(t,n,e){var o;return t instanceof i||t instanceof s?o=this.output.connect(t,n,e):t instanceof r&&(o=t.input(this,n,e)),o},gate:function(t,n){this.output.gate(t,n)},set:function(t){for(var n=0;n<this.nodes.length;n++){var e=this.nodes[n];e instanceof s?(void 0!==t.bias&&(e.bias=t.bias),e.squash=t.squash||e.squash,e.type=t.type||e.type):e instanceof i&&e.set(t)}},disconnect:function(t,n){var e,o,r;if(n=n||!1,t instanceof i)for(e=0;e<this.nodes.length;e++)for(o=0;o<t.nodes.length;o++){for(this.nodes[e].disconnect(t.nodes[o],n),r=this.connections.out.length-1;r>=0;r--){var a=this.connections.out[r];if(a.from===this.nodes[e]&&a.to===t.nodes[o]){this.connections.out.splice(r,1);break}}if(n)for(r=this.connections.in.length-1;r>=0;r--){var h=this.connections.in[r];if(h.from===t.nodes[o]&&h.to===this.nodes[e]){this.connections.in.splice(r,1);break}}}else if(t instanceof s)for(e=0;e<this.nodes.length;e++){for(this.nodes[e].disconnect(t,n),o=this.connections.out.length-1;o>=0;o--){var c=this.connections.out[o];if(c.from===this.nodes[e]&&c.to===t){this.connections.out.splice(o,1);break}}if(n)for(r=this.connections.in.length-1;r>=0;r--){var u=this.connections.in[r];if(u.from===t&&u.to===this.nodes[e]){this.connections.in.splice(r,1);break}}}},clear:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear()}},r.Dense=function(t){var n=new r,e=new i(t);return n.nodes.push(e),n.output=e,n.input=function(t,n,i){return t instanceof r&&(t=t.output),n=n||o.connection.ALL_TO_ALL,t.connect(e,n,i)},n},r.LSTM=function(t){var n=new r,e=new i(t),s=new i(t),a=new i(t),h=new i(t),c=new i(t);e.set({bias:1}),s.set({bias:1}),h.set({bias:1}),a.connect(e,o.connection.ALL_TO_ALL),a.connect(s,o.connection.ALL_TO_ALL),a.connect(h,o.connection.ALL_TO_ALL);var u=a.connect(a,o.connection.ONE_TO_ONE),l=a.connect(c,o.connection.ALL_TO_ALL);return s.gate(u,o.gating.SELF),h.gate(l,o.gating.OUTPUT),n.nodes=[e,s,a,h,c],n.output=c,n.input=function(t,n,i){t instanceof r&&(t=t.output),n=n||o.connection.ALL_TO_ALL;var c=[],u=t.connect(a,n,i);return c=(c=(c=(c=c.concat(u)).concat(t.connect(e,n,i))).concat(t.connect(h,n,i))).concat(t.connect(s,n,i)),e.gate(u,o.gating.INPUT),c},n},r.GRU=function(t){var n=new r,e=new i(t),s=new i(t),a=new i(t),h=new i(t),c=new i(t),u=new i(t);u.set({bias:0,squash:o.activation.IDENTITY,type:"constant"}),h.set({squash:o.activation.TANH}),s.set({bias:0,squash:o.activation.INVERSE,type:"constant"}),e.set({bias:1}),a.set({bias:0}),u.connect(e,o.connection.ALL_TO_ALL),e.connect(s,o.connection.ONE_TO_ONE,1),u.connect(a,o.connection.ALL_TO_ALL);var l=u.connect(h,o.connection.ALL_TO_ALL);a.gate(l,o.gating.OUTPUT);var f=u.connect(c,o.connection.ALL_TO_ALL),p=h.connect(c,o.connection.ALL_TO_ALL);return e.gate(f,o.gating.OUTPUT),s.gate(p,o.gating.OUTPUT),c.connect(u,o.connection.ONE_TO_ONE,1),n.nodes=[e,s,a,h,c,u],n.output=c,n.input=function(t,n,i){t instanceof r&&(t=t.output),n=n||o.connection.ALL_TO_ALL;var s=[];return s=(s=(s=s.concat(t.connect(e,n,i))).concat(t.connect(a,n,i))).concat(t.connect(h,n,i))},n},r.Memory=function(t,n){var e,s=new r,a=null;for(e=0;e<n;e++){var h=new i(t);h.set({squash:o.activation.IDENTITY,bias:0,type:"constant"}),null!=a&&a.connect(h,o.connection.ONE_TO_ONE,1),s.nodes.push(h),a=h}for(s.nodes.reverse(),e=0;e<s.nodes.length;e++)s.nodes[e].nodes.reverse();var c=new i(0);for(var u in s.nodes)c.nodes=c.nodes.concat(s.nodes[u].nodes);return s.output=c,s.input=function(t,n,e){if(t instanceof r&&(t=t.output),n=n||o.connection.ALL_TO_ALL,t.nodes.length!==s.nodes[s.nodes.length-1].nodes.length)throw new Error("Previous layer size must be same as memory size");return t.connect(s.nodes[s.nodes.length-1],o.connection.ONE_TO_ONE,1)},s}},sF2W:function(t,n,e){var o=e("Ya6e"),i={ADD_NODE:{name:"ADD_NODE"},SUB_NODE:{name:"SUB_NODE",keep_gates:!0},ADD_CONN:{name:"ADD_CONN"},SUB_CONN:{name:"REMOVE_CONN"},MOD_WEIGHT:{name:"MOD_WEIGHT",min:-1,max:1},MOD_BIAS:{name:"MOD_BIAS",min:-1,max:1},MOD_ACTIVATION:{name:"MOD_ACTIVATION",mutateOutput:!0,allowed:[o.LOGISTIC,o.TANH,o.RELU,o.IDENTITY,o.STEP,o.SOFTSIGN,o.SINUSOID,o.GAUSSIAN,o.BENT_IDENTITY,o.BIPOLAR,o.BIPOLAR_SIGMOID,o.HARD_TANH,o.ABSOLUTE,o.INVERSE,o.SELU]},ADD_SELF_CONN:{name:"ADD_SELF_CONN"},SUB_SELF_CONN:{name:"SUB_SELF_CONN"},ADD_GATE:{name:"ADD_GATE"},SUB_GATE:{name:"SUB_GATE"},ADD_BACK_CONN:{name:"ADD_BACK_CONN"},SUB_BACK_CONN:{name:"SUB_BACK_CONN"},SWAP_NODES:{name:"SWAP_NODES",mutateOutput:!0}};i.ALL=[i.ADD_NODE,i.SUB_NODE,i.ADD_CONN,i.SUB_CONN,i.MOD_WEIGHT,i.MOD_BIAS,i.MOD_ACTIVATION,i.ADD_GATE,i.SUB_GATE,i.ADD_SELF_CONN,i.SUB_SELF_CONN,i.ADD_BACK_CONN,i.SUB_BACK_CONN,i.SWAP_NODES],i.FFW=[i.ADD_NODE,i.SUB_NODE,i.ADD_CONN,i.SUB_CONN,i.MOD_WEIGHT,i.MOD_BIAS,i.MOD_ACTIVATION,i.SWAP_NODES],t.exports=i},siVa:function(t,n){var e={FIXED:function(){return function(t,n){return t}},STEP:function(t,n){t=t||.9,n=n||100;return function(e,o){return e*Math.pow(t,Math.floor(o/n))}},EXP:function(t){t=t||.999;return function(n,e){return n*Math.pow(t,e)}},INV:function(t,n){t=t||.001,n=n||2;return function(e,o){return e*Math.pow(1+t*o,-n)}}};t.exports=e},tW6Z:function(t,n,e){var o={workers:e("XZqd"),serializeDataSet:function(t){for(var n=[t[0].input.length,t[0].output.length],e=0;e<t.length;e++){var o;for(o=0;o<n[0];o++)n.push(t[e].input[o]);for(o=0;o<n[1];o++)n.push(t[e].output[o])}return n},activateSerializedNetwork:function(t,n,e,o,i){for(var s=0;s<o[0];s++)n[s]=t[s];for(s=2;s<o.length;s++){var r=o[s++],a=o[s++],h=o[s++],c=o[s++],u=o[s++];for(e[r]=(-1===u?1:n[u])*c*e[r]+a;-2!==o[s];)e[r]+=n[o[s++]]*o[s++]*(-1===o[s++]?1:n[o[s-1]]);n[r]=i[h](e[r])}var l=[];for(s=n.length-o[1];s<n.length;s++)l.push(n[s]);return l},deserializeDataSet:function(t){for(var n=[],e=t[0]+t[1],o=0;o<(t.length-2)/e;o++){for(var i=[],s=2+o*e;s<2+o*e+t[0];s++)i.push(t[s]);var r=[];for(s=2+o*e+t[0];s<2+o*e+e;s++)r.push(t[s]);n.push(i),n.push(r)}return n},activations:[function(t){return 1/(1+Math.exp(-t))},function(t){return Math.tanh(t)},function(t){return t},function(t){return t>0?1:0},function(t){return t>0?t:0},function(t){return t/(1+Math.abs(t))},function(t){return Math.sin(t)},function(t){return Math.exp(-Math.pow(t,2))},function(t){return(Math.sqrt(Math.pow(t,2)+1)-1)/2+t},function(t){return t>0?1:-1},function(t){return 2/(1+Math.exp(-t))-1},function(t){return Math.max(-1,Math.min(1,t))},function(t){return Math.abs(t)},function(t){return 1-t},function(t){var n=1.6732632423543772;return 1.0507009873554805*(t>0?t:n*Math.exp(t)-n)}],testSerializedSet:function(t,n,e,i,s,r){for(var a=0,h=0;h<t.length;h+=2){var c=o.activateSerializedNetwork(t[h],e,i,s,r);a+=n(t[h+1],c)}return a/(t.length/2)}};for(var i in o)t.exports[i]=o[i]},v752:function(t,n){t.exports={FITNESS_PROPORTIONATE:{name:"FITNESS_PROPORTIONATE"},POWER:{name:"POWER",power:4},TOURNAMENT:{name:"TOURNAMENT",size:5,probability:.5}}},w7tI:function(t,n,e){function o(t,n,e,o,i,s,r){try{var a=t[s](r),h=a.value}catch(t){return void e(t)}a.done?n(h):Promise.resolve(h).then(o,i)}function i(t){return function(){var n=this,e=arguments;return new Promise(function(i,s){var r=t.apply(n,e);function a(t){o(r,i,s,a,h,"next",t)}function h(t){o(r,i,s,a,h,"throw",t)}a(void 0)})}}t.exports=c;var s=e("eeHM"),r=e("6nyA"),a=e("HvSW"),h=r.selection;function c(t,n,e,o){this.input=t,this.output=n,this.fitness=e,o=o||{},this.equal=o.equal||!1,this.clear=o.clear||!1,this.popsize=o.popsize||50,this.elitism=o.elitism||0,this.provenance=o.provenance||0,this.mutationRate=o.mutationRate||.3,this.mutationAmount=o.mutationAmount||1,this.fitnessPopulation=o.fitnessPopulation||!1,this.selection=o.selection||r.selection.POWER,this.crossover=o.crossover||[r.crossover.SINGLE_POINT,r.crossover.TWO_POINT,r.crossover.UNIFORM,r.crossover.AVERAGE],this.mutation=o.mutation||r.mutation.FFW,this.template=o.network||!1,this.maxNodes=o.maxNodes||1/0,this.maxConns=o.maxConns||1/0,this.maxGates=o.maxGates||1/0,this.selectMutationMethod="function"==typeof o.mutationSelection?o.mutationSelection.bind(this):this.selectMutationMethod,this.generation=0,this.createPool(this.template)}c.prototype={createPool:function(t){this.population=[];for(var n=0;n<this.popsize;n++){var e;(e=this.template?s.fromJSON(t.toJSON()):new s(this.input,this.output)).score=void 0,this.population.push(e)}},evolve:function(){var t=i(regeneratorRuntime.mark(function t(){var n,e,o,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==this.population[this.population.length-1].score){t.next=3;break}return t.next=3,this.evaluate();case 3:for(this.sort(),(e=s.fromJSON(this.population[0].toJSON())).score=this.population[0].score,o=[],i=[],r=0;r<this.elitism;r++)i.push(this.population[r]);for(r=0;r<this.provenance;r++)o.push(s.fromJSON(this.template.toJSON()));for(r=0;r<this.popsize-this.elitism-this.provenance;r++)o.push(this.getOffspring());for(this.population=o,this.mutate(),(n=this.population).push.apply(n,i),r=0;r<this.population.length;r++)this.population[r].score=void 0;return this.generation++,t.abrupt("return",e);case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getOffspring:function(){var t=this.getParent(),n=this.getParent();return s.crossOver(t,n,this.equal)},selectMutationMethod:function(t){var n=this.mutation[Math.floor(Math.random()*this.mutation.length)];if(n===r.mutation.ADD_NODE&&t.nodes.length>=this.maxNodes)a.warnings;else if(n===r.mutation.ADD_CONN&&t.connections.length>=this.maxConns)a.warnings;else{if(!(n===r.mutation.ADD_GATE&&t.gates.length>=this.maxGates))return n;a.warnings}},mutate:function(){for(var t=0;t<this.population.length-this.elitism;t++)if(Math.random()<=this.mutationRate)for(var n=0;n<this.mutationAmount;n++){var e=this.selectMutationMethod(this.population[t]);this.population[t].mutate(e)}},evaluate:function(){var t=i(regeneratorRuntime.mark(function t(){var n,e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.fitnessPopulation){t.next=6;break}if(this.clear)for(n=0;n<this.population.length;n++)this.population[n].clear();return t.next=4,this.fitness(this.population);case 4:t.next=16;break;case 6:n=0;case 7:if(!(n<this.population.length)){t.next=16;break}return e=this.population[n],this.clear&&e.clear(),t.next=12,this.fitness(e);case 12:e.score=t.sent;case 13:n++,t.next=7;break;case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),sort:function(){this.population.sort(function(t,n){return n.score-t.score})},getFittest:function(){return void 0===this.population[this.population.length-1].score&&this.evaluate(),this.population[0].score<this.population[1].score&&this.sort(),this.population[0]},getAverage:function(){void 0===this.population[this.population.length-1].score&&this.evaluate();for(var t=0,n=0;n<this.population.length;n++)t+=this.population[n].score;return t/this.population.length},getParent:function(){var t;switch(this.selection){case h.POWER:this.population[0].score<this.population[1].score&&this.sort();var n=Math.floor(Math.pow(Math.random(),this.selection.power)*this.population.length);return this.population[n];case h.FITNESS_PROPORTIONATE:var e=0,o=0;for(t=0;t<this.population.length;t++){var i=this.population[t].score;o=i<o?i:o,e+=i}e+=(o=Math.abs(o))*this.population.length;var s=Math.random()*e,r=0;for(t=0;t<this.population.length;t++){var a=this.population[t];if(s<(r+=a.score+o))return a}return this.population[Math.floor(Math.random()*this.population.length)];case h.TOURNAMENT:if(this.selection.size>this.popsize)throw new Error("Your tournament size should be lower than the population size, please change methods.selection.TOURNAMENT.size");var c=[];for(t=0;t<this.selection.size;t++){var u=this.population[Math.floor(Math.random()*this.population.length)];c.push(u)}for(c.sort(function(t,n){return n.score-t.score}),t=0;t<this.selection.size;t++)if(Math.random()<this.selection.probability||t===this.selection.size-1)return c[t]}},export:function(){for(var t=[],n=0;n<this.population.length;n++){var e=this.population[n];t.push(e.toJSON())}return t},import:function(t){for(var n=[],e=0;e<t.length;e++){var o=t[e];n.push(s.fromJSON(o))}this.population=n,this.popsize=n.length}}},x0Xb:function(t,n,e){"use strict";e.d(n,"a",function(){return o});var o="NEAT"}});